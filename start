#!/bin/bash
# Run the RF24Network Server Parsing messages from Nodes
./rf24network-server/rf24network_rx > /data/logs/rf24Network-server/rf24network_rx.log

if [[ "$INITSYSTEM" == "on" ]]; then
	DBUS_SYSTEM_BUS_ADDRESS=unix:path=/host_run/dbus/system_bus_socket npm start
else
	npm start
fi

# We run the Python app after the wifi connection has been established
# and the previous command has exited.
cd ./python-server && python main.py

while true
do
	echo "App exited but container is still running to allow web terminal access"
	sleep 3600
done
